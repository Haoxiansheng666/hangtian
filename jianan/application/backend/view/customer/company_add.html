{include file="public/header" /}<script src="__STATICBACKEND__/distpicker/js/distpicker.js"></script><style type="text/css">  html{    background-color:#fff;  }  #province,#city,#area{    width:102px;    height:38px;    border: 1px solid #E6E6E6;  }</style><form class="layui-form"  style="margin-top:30px;width:90%;" id="addform" onkeydown="if(event.keyCode==13){return false;}">    <div class="layui-form-item">      <label class="layui-form-label">企业名称<span class="reqcolor">*</span></label>      <div class="layui-input-block">        <input type="text" name="company"  class="layui-input" lay-verify="required" value="{$company['company']|default=''}" >      </div>    </div>    <div class="layui-form-item">        <label class="layui-form-label">联系人<span class="reqcolor">*</span></label>        <div class="layui-input-block">            <input type="text" name="contact"  class="layui-input" lay-verify="required" value="{$company['contact']|default=''}" >        </div>    </div>    <div class="layui-form-item">      <label class="layui-form-label">联系电话<span style="color:red;">*</span></label>      <div class="layui-input-block">        <input type="text" name="mobile" lay-verify="required" class="layui-input" value="{$company['mobile']|default=''}" >      </div>    </div>    <div class="layui-form-item">        <label class="layui-form-label">详细地址</label>        <div class="layui-input-block">            <input type="text" name="address" ay-verify="required" class="layui-input" value="{$company['address']|default=''}" >        </div>    </div>    <div class="layui-form-item">        <label class="layui-form-label">企业图片</label>        <div class="layui-input-block layui-upload">            <button type="button" class="layui-btn" id="pay_proof">上传图片</button>            <div class="layui-upload-list">                <img class="layui-upload-img enlargeImg" style="border:none;" id="preview" src="{$company['image']|default=''}">            </div>            <input type="hidden" name="image" value="">        </div>    </div>    <div class="layui-form-item" style="text-align:center;">      <div class="layui-input-block">        <input  type="hidden" name='id' value="{$company['id']?$company['id']:''}" id='hidden-id'>        <button type="reset" class="layui-btn layui-btn-primary">重置</button>        <button class="layui-btn" lay-submit="" lay-filter="addaction">保 存</button>      </div>    </div></form><script>layui.config({    base: '__STATICBACKEND__/layuiadmin/' //静态资源所在路径  }).extend({    index: 'lib/index' //主入口模块  }).use(['index','upload', 'form'], function() {    var $ = layui.$        ,upload = layui.upload        , form = layui.form;    /* 监听提交 */    form.on('submit(addaction)', function (data) {        var url = "{:url('Customer/company_edit')}";        var data = $("#addform").serializeArray();        jqueryAjax('POST', url, data, successLayui);        return false;    });    //执行实例    var uploadInst = upload.render({        elem: '#pay_proof' //绑定元素        , field: 'img'        ,url: "{:url('upload/layuiImgUpload')}" //上传接口        , before: function (obj) {            //预读本地文件示例，不支持ie8            obj.preview(function (index, file, result) {                $('#preview').attr('src', result); //图片链接（base64）                console.log(result);            });        }        ,done: function(res){            console.log(res);            //如果上传失败            if (res.code > 0) {                return layer.msg('上传失败');            } else {                var path = res.data;                $('input[name="image"]').val(path);            }        }        ,error: function(){            //请求异常回调            $('#preview').attr('src', '')            layer.alert('主图大小不能超过300k，请重新选择!');        }    });})</script>